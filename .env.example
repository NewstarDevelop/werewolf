# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║                     Werewolf AI Game - 环境配置模板                          ║
# ║                     Environment Configuration Template                       ║
# ╚══════════════════════════════════════════════════════════════════════════════╝
#
# 快速开始 (Quick Start):
#   1. cp .env.example .env
#   2. 填写 JWT_SECRET_KEY（必需）
#   3. 填写 OPENAI_API_KEY 或设置 LLM_USE_MOCK=true
#   4. docker compose up
#
# 配置验证 (Validate Config):
#   cd backend && python verify_config.py
#
# ══════════════════════════════════════════════════════════════════════════════


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        1. 核心配置 (REQUIRED)                                │
# └──────────────────────────────────────────────────────────────────────────────┘

# JWT 认证密钥 [必需]
# 用于玩家身份验证和 WebSocket 连接
# 生成方式: openssl rand -hex 32
JWT_SECRET_KEY=

# OpenAI API 密钥 [推荐]
# 获取地址: https://platform.openai.com/api-keys
# 不配置时请设置 LLM_USE_MOCK=true
OPENAI_API_KEY=

# OpenAI API 基础地址 [可选]
# 用于自定义 API 端点（如代理服务）
# OPENAI_BASE_URL=https://api.openai.com/v1


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        2. LLM 模型配置 (AI Settings)                         │
# └──────────────────────────────────────────────────────────────────────────────┘

# 默认 LLM 模型
LLM_MODEL=gpt-4o-mini

# API 调用最大重试次数
LLM_MAX_RETRIES=2

# Mock 模式（不调用真实 API，用于测试）
# 未配置 API Key 时建议设为 true
LLM_USE_MOCK=false


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        3. 应用配置 (Application)                             │
# └──────────────────────────────────────────────────────────────────────────────┘

# 调试模式
DEBUG=false

# 日志级别: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# 数据存储目录（SQLite 数据库等）
DATA_DIR=data


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        4. 安全配置 (Security)                                │
# └──────────────────────────────────────────────────────────────────────────────┘

# Admin Key（管理接口认证）
# 生成方式: openssl rand -hex 16
ADMIN_KEY=

# Admin Key 功能开关
# 生产环境建议关闭，使用 JWT admin token 替代
ADMIN_KEY_ENABLED=false

# Debug 模式（控制 debug-messages API 端点）
DEBUG_MODE=false

# 可信代理列表（用于正确获取客户端 IP）
# 格式: 逗号分隔的 IP 或 CIDR
# 示例: 127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
# 空值 = 不信任任何代理（直接使用连接 IP）
# TRUSTED_PROXIES=127.0.0.1

# CORS 跨域配置 [Docker 部署必需]
# 格式: 逗号分隔的允许源
# ⚠️ 重要: 使用 "*" 会禁用 Cookie 认证，导致创建房间等功能失败！
#
# Docker 部署时必须设置为你的实际域名:
CORS_ORIGINS=https://your-domain.com
#
# 本地开发示例:
# CORS_ORIGINS=http://localhost:5173,http://localhost:3000
#
# 多域名示例:
# CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        5. JWT 认证配置 (Authentication)                      │
# └──────────────────────────────────────────────────────────────────────────────┘

# JWT 签名算法
JWT_ALGORITHM=HS256

# JWT 过期时间（分钟）
# 默认 7 天 = 60 * 24 * 7 = 10080
JWT_EXPIRE_MINUTES=10080


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        6. OAuth 单点登录 (linux.do)                          │
# └──────────────────────────────────────────────────────────────────────────────┘
# 在 linux.do 开发者后台创建应用获取凭证

# OAuth 应用凭证
# LINUXDO_CLIENT_ID=your_client_id
# LINUXDO_CLIENT_SECRET=your_client_secret

# OAuth 回调地址（需与后台配置一致）
# LINUXDO_REDIRECT_URI=https://your-domain.com/api/auth/callback/linuxdo

# OAuth 端点（通常无需修改）
# LINUXDO_AUTHORIZE_URL=https://connect.linux.do/oauth2/authorize
# LINUXDO_TOKEN_URL=https://connect.linux.do/oauth2/token
# LINUXDO_USERINFO_URL=https://connect.linux.do/api/user
# LINUXDO_SCOPES=user


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        7. AI 对局分析配置 (Game Analysis)                    │
# └──────────────────────────────────────────────────────────────────────────────┘
# 独立于游戏 AI 的分析功能配置

# 分析专用 Provider [可选]
# 可选值: openai, deepseek, anthropic, moonshot, qwen, glm, doubao, minimax
# 不设置则使用默认 OpenAI 配置
# ANALYSIS_PROVIDER=

# 分析专用模型（推荐使用高级模型）
ANALYSIS_MODEL=gpt-4o

# 分析模式
# comprehensive = 详细分析（3-5分钟）
# quick = 快速分析（1-2分钟）
# custom = 自定义
ANALYSIS_MODE=comprehensive

# 分析语言
# auto = 自动检测 | zh = 中文 | en = 英文
ANALYSIS_LANGUAGE=auto

# 分析结果缓存
ANALYSIS_CACHE_ENABLED=true

# 分析生成参数
ANALYSIS_MAX_TOKENS=4000
ANALYSIS_TEMPERATURE=0.7


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        8. 多 AI Provider 配置 (Multi-Provider)               │
# └──────────────────────────────────────────────────────────────────────────────┘
# 支持的 Provider: OPENAI, ANTHROPIC, DEEPSEEK, MOONSHOT, QWEN, GLM, DOUBAO, MINIMAX
# 每个 Provider 支持: {PREFIX}_API_KEY, {PREFIX}_BASE_URL, {PREFIX}_MODEL,
#                     {PREFIX}_MAX_RETRIES, {PREFIX}_TEMPERATURE, {PREFIX}_MAX_TOKENS

# ─────────────────────────── Deepseek ───────────────────────────
# DEEPSEEK_API_KEY=
# DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
# DEEPSEEK_MODEL=deepseek-chat
# DEEPSEEK_MAX_RETRIES=2
# DEEPSEEK_TEMPERATURE=0.7
# DEEPSEEK_MAX_TOKENS=500

# ─────────────────────────── Anthropic Claude ───────────────────────────
# ANTHROPIC_API_KEY=
# ANTHROPIC_BASE_URL=https://api.anthropic.com/v1
# ANTHROPIC_MODEL=claude-3-haiku-20240307
# ANTHROPIC_MAX_RETRIES=2
# ANTHROPIC_TEMPERATURE=0.7
# ANTHROPIC_MAX_TOKENS=500

# ─────────────────────────── Moonshot (月之暗面) ───────────────────────────
# MOONSHOT_API_KEY=
# MOONSHOT_BASE_URL=https://api.moonshot.cn/v1
# MOONSHOT_MODEL=moonshot-v1-8k
# MOONSHOT_MAX_RETRIES=2
# MOONSHOT_TEMPERATURE=0.7
# MOONSHOT_MAX_TOKENS=500

# ─────────────────────────── Qwen (通义千问) ───────────────────────────
# QWEN_API_KEY=
# QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# QWEN_MODEL=qwen-turbo
# QWEN_MAX_RETRIES=2
# QWEN_TEMPERATURE=0.7
# QWEN_MAX_TOKENS=500

# ─────────────────────────── GLM (智谱清言) ───────────────────────────
# GLM_API_KEY=
# GLM_BASE_URL=https://open.bigmodel.cn/api/paas/v4
# GLM_MODEL=glm-4-flash
# GLM_MAX_RETRIES=2
# GLM_TEMPERATURE=0.7
# GLM_MAX_TOKENS=500

# ─────────────────────────── Doubao (豆包) ───────────────────────────
# DOUBAO_API_KEY=
# DOUBAO_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
# DOUBAO_MODEL=doubao-pro-4k
# DOUBAO_MAX_RETRIES=2
# DOUBAO_TEMPERATURE=0.7
# DOUBAO_MAX_TOKENS=500

# ─────────────────────────── MiniMax ───────────────────────────
# MINIMAX_API_KEY=
# MINIMAX_BASE_URL=https://api.minimax.chat/v1
# MINIMAX_MODEL=abab6.5s-chat
# MINIMAX_MAX_RETRIES=2
# MINIMAX_TEMPERATURE=0.7
# MINIMAX_MAX_TOKENS=500

# ─────────────────────────── 自定义 Provider (1-9) ───────────────────────────
# AI_PROVIDER_1_NAME=custom
# AI_PROVIDER_1_API_KEY=
# AI_PROVIDER_1_BASE_URL=https://your-api.com/v1
# AI_PROVIDER_1_MODEL=your-model
# AI_PROVIDER_1_MAX_RETRIES=2
# AI_PROVIDER_1_TEMPERATURE=0.7
# AI_PROVIDER_1_MAX_TOKENS=500


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        9. 玩家级别 AI 配置 (Per-Player AI)                   │
# └──────────────────────────────────────────────────────────────────────────────┘
# 为不同座位号（2-9）配置不同的 AI，实现多样化对战

# ─────────────────────────── 方式一：专属配置 ───────────────────────────
# 为特定座位配置独立的 LLM（创建 player_{seat_id} provider）
# AI_PLAYER_2_API_KEY=
# AI_PLAYER_2_BASE_URL=https://api.openai.com/v1
# AI_PLAYER_2_MODEL=gpt-4o-mini
# AI_PLAYER_2_TEMPERATURE=0.7
# AI_PLAYER_2_MAX_TOKENS=500
# AI_PLAYER_2_MAX_RETRIES=2

# ─────────────────────────── 方式二：映射到已有 Provider ───────────────────────────
# 将座位映射到上面配置的 Provider（优先级最高）
# AI_PLAYER_2_PROVIDER=deepseek
# AI_PLAYER_3_PROVIDER=anthropic
# AI_PLAYER_4_PROVIDER=openai

# ─────────────────────────── 方式三：批量 JSON 映射 ───────────────────────────
# 一次性配置多个座位的 Provider 映射
# AI_PLAYER_MAPPING={"2":"deepseek","3":"anthropic","4":"openai","5":"moonshot"}


# ┌──────────────────────────────────────────────────────────────────────────────┐
# │                        10. 前端配置 (Frontend - Vite)                        │
# └──────────────────────────────────────────────────────────────────────────────┘
# Docker 部署时前端通过 nginx 反代，通常无需配置
# 本地开发直连后端时使用

# 后端 API 地址
# VITE_API_URL=http://localhost:8082
# VITE_API_BASE_URL=http://localhost:8082

# ─────────────────────────── Sentry 错误监控 ───────────────────────────
# VITE_SENTRY_DSN=https://xxx@sentry.io/xxx
# VITE_SENTRY_ENV=production

# 性能监控采样率 (0.0 - 1.0)
# VITE_SENTRY_TRACES_SAMPLE_RATE=0.1

# Session Replay 配置
# VITE_SENTRY_ENABLE_REPLAY=false
# VITE_SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1
# VITE_SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1.0


# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║                              配置示例 (Examples)                             ║
# ╚══════════════════════════════════════════════════════════════════════════════╝
#
# ┌─ 最小配置（仅 OpenAI）─────────────────────────────────────────────────────┐
# │ JWT_SECRET_KEY=your-random-secret-key-at-least-32-characters              │
# │ OPENAI_API_KEY=sk-your-key-here                                           │
# └───────────────────────────────────────────────────────────────────────────┘
#
# ┌─ Mock 模式（无需 API Key）────────────────────────────────────────────────┐
# │ JWT_SECRET_KEY=your-random-secret-key-at-least-32-characters              │
# │ LLM_USE_MOCK=true                                                         │
# └───────────────────────────────────────────────────────────────────────────┘
#
# ┌─ 多 Provider 混战配置 ────────────────────────────────────────────────────┐
# │ JWT_SECRET_KEY=xxx                                                        │
# │ OPENAI_API_KEY=sk-xxx                                                     │
# │ DEEPSEEK_API_KEY=sk-xxx                                                   │
# │ ANTHROPIC_API_KEY=sk-ant-xxx                                              │
# │ AI_PLAYER_MAPPING={"2":"openai","3":"deepseek","4":"anthropic"}           │
# └───────────────────────────────────────────────────────────────────────────┘
#
# ══════════════════════════════════════════════════════════════════════════════
